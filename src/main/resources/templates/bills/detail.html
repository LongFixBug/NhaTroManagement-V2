<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/_layout :: html(pageTitle=${pageTitle}, content=~{::content})}" lang="en">

<th:block th:fragment="content">
    <h2 th:text="${pageTitle}">Bill Details</h2>

    <div class="card">
        <div class="card-header">
            <span th:text="#{bill.details.billIdLabel}">Bill ID:</span> <span th:text="${bill.id}"></span>
        </div>
        <div class="card-body">
            <div class="row mb-2">
                <div class="col-md-3"><strong th:text="#{bill.details.tenantLabel}">Tenant:</strong></div>
                <div class="col-md-9" th:text="${bill.tenant.name}"></div>
            </div>
            <div class="row mb-2">
                <div class="col-md-3"><strong th:text="#{bill.details.billingPeriodLabel}">Billing Period:</strong></div>
                <div class="col-md-9" th:text="${bill.billMonth} + '/' + ${bill.billYear}"></div>
            </div>

            <hr/>
            <h5 th:text="#{bill.details.roomChargesTitle}">Room Charges</h5>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.basicRoomRentLabel}">Basic Room Rent:</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.roomRent, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>

            <hr/>
            <h5 th:text="#{bill.details.electricityTitle}">Electricity</h5>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.electricityPreviousLabel}">Previous Reading (kWh):</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.electricityKwhPrevious, 1, 'COMMA', 1, 'POINT')}"></div>
            </div>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.electricityCurrentLabel}">Current Reading (kWh):</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.electricityKwhCurrent, 1, 'COMMA', 1, 'POINT')}"></div>
            </div>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.electricityUsageLabel}">Usage (kWh):</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.electricityKwhCurrent - bill.electricityKwhPrevious, 1, 'COMMA', 1, 'POINT')}"></div>
            </div>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.electricityPricePerKwhLabel}">Price per kWh:</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(electricityPriceUnit, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>
            <div class="row mb-2">
                <div class="col-md-3"><strong th:text="#{bill.details.electricityCostLabel}">Electricity Cost:</strong></div>
                <div class="col-md-9 text-end fw-bold" th:text="${#numbers.formatDecimal(bill.electricityCost, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>

            <hr/>
            <h5 th:text="#{bill.details.waterTitle}">Water</h5>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.waterPreviousLabel}">Previous Reading (m続):</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.waterM3Previous, 1, 'COMMA', 1, 'POINT')}"></div>
            </div>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.waterCurrentLabel}">Current Reading (m続):</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.waterM3Current, 1, 'COMMA', 1, 'POINT')}"></div>
            </div>
             <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.waterUsageLabel}">Usage (m続):</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.waterM3Current - bill.waterM3Previous, 1, 'COMMA', 1, 'POINT')}"></div>
            </div>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.waterPricePerM3Label}">Price per m続:</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(waterPriceUnit, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>
            <div class="row mb-2">
                <div class="col-md-3"><strong th:text="#{bill.details.waterCostLabel}">Water Cost:</strong></div>
                <div class="col-md-9 text-end fw-bold" th:text="${#numbers.formatDecimal(bill.waterCost, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>

            <hr/>
            <h5 th:text="#{bill.details.otherFeesTitle}">Other Fees</h5>
            <div class="row mb-1">
                <div class="col-md-3"><span th:text="#{bill.details.trashFeeLabel}">Trash Fee:</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.trashFee, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>
            <div class="row mb-2">
                <div class="col-md-3"><span th:text="#{bill.details.wifiFeeLabel}">WiFi Fee:</span></div>
                <div class="col-md-9 text-end" th:text="${#numbers.formatDecimal(bill.wifiFee, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>

            <hr/>
            <div class="row mt-3 mb-3">
                <div class="col-md-3"><h4 th:text="#{bill.details.totalAmountDueLabel}">Total Amount Due:</h4></div>
                <div class="col-md-9 text-end h4 fw-bold" th:text="${#numbers.formatDecimal(bill.totalAmount, 1, 'COMMA', 0, 'POINT') + ' VND'}"></div>
            </div>
        </div>
        <div class="card-footer text-muted">
            <span th:text="#{bill.details.generatedOnLabel}">Generated on</span> <span th:text="${#dates.format(#dates.createNow(), 'dd-MMM-yyyy HH:mm')}"></span>
        </div>
    </div>

    <div class="mt-3">
        <a th:href="@{/bills/edit/{id}(id=${bill.id})}" class="btn btn-warning me-2" th:text="#{button.edit}">Edit</a>
        <a th:href="@{/bills/delete/{id}(id=${bill.id})}" class="btn btn-danger me-2" th:text="#{button.delete}" th:onclick="return confirm(#messages.msg('confirm.delete.bill.text', bill.id));">Delete</a>
            <a th:href="@{/bills/tenant/{tenantId}(tenantId=${bill.tenant.id})}" class="btn btn-secondary" th:text="#{bill.details.backToTenantBillsButton}">Back to Tenant's Bills</a>
            <a th:href="@{/bills}" class="btn btn-info" th:text="#{bill.details.backToAllBillsButton}">Back to All Bills</a>
            <a th:href="@{/bills/export/pdf/{billId}(billId=${bill.id})}" class="btn btn-success" th:text="#{button.export.pdf}">Export to PDF</a>
    </div>

</th:block>

</html>
